# Design Document — Slime Platformer (Android, UE4.27)

Краткое описание
- Жанр: 2D платформер с физикой слизи и мягким платформенным геймплеем.
- Целевая платформа: Android (устройства среднего уровня).
- Движок: Unreal Engine 4.27 (Paper2D / Flipbook + Physics для слизи).
- Тон: мило, цветасто, лёгкая головоломка + экшен.

Цели проекта
- Быстрый MVP для тестирования управления и базовой механики слизи.
- Хорошая производительность на Android (целевой профиль: 30 FPS на устройствах mid-tier).
- Масштабируемая архитектура для добавления уровней и способностей.

Игровая механика
- Главный герой: слайм, который может:
  - Прыгать (с двойным прыжком как апгрейд).
  - Примазываться/растягиваться (скользить и преодолевать узкие щели).
  - Поглощать мелкие враги/объекты для временных баффов.
  - Отталкиваться от поверхностей с разной упругостью.
- Физика слизи:
  - Параметры: упругость, вязкость, сцепление.
  - Эффекты на движение: высокая вязкость замедляет скольжение, высокая упругость увеличивает отскок.
- Враги и препятствия:
  - Простые патрулирующие мелкие враги.
  - Ядовитые пузыри, которые уменьшают размер слизи.
  - Лазеры/шипы — мгновенная смерть.
- Коллекционные предметы:
  - Слёзы слизи (энергия), монетки для косметики, кристаллы для апгрейдов.
- Система прогрессии:
  - Небольшое дерево улучшений: максимум здоровья/размер, двойной прыжок, уменьшение вязкости, новые навыки.

Управление (Android — сенсор)
- Левая виртуальная джойстик — горизонтальное движение.
- Правая кнопка — прыжок; удержание — повышенный/направленный прыжок.
- Вторая правая кнопка (опционально) — взаимодействие/специальная способность (склеивание/взрыв).
- Жесты: свайп вниз для быстрого сплющивания, свайп вверх + тап для сильного отскока.
- UI: настраиваемая схема управления и чувствительность.

Арты и стиль
- Стиль: мультяшный, яркие цвета, мягкие тени.
- Форматы: спрайты/flipbooks для анимаций, компактные текстуры atlases.
- Размеры: оптимизировать под плотности экранов Android (ldpi → xxhdpi).

Аудио
- Саундтрек: лёгкие мелодии, повторяемые циклы.
- Эффекты: бульканье, отскоки, поглощение, прыжки.
- Оптимизация: OGG/MP3 с низким битрейтом для эффектов, разумный микс.

Технические требования (UE4.27)
- 2D workflow: Paper2D (или спрайтовые Flipbooks) + Physics2D/PhysX.
- Плагины: Mobile HDR off для производительности, Android SDK/NDK настроены.
- Input: Mobile touch mappings в Project Settings -> Input.
- Build: Android (ETC2 / ASTC в зависимости от целевых устройств).
- Аппаратная оптимизация: Occlusion, минимальное количество draw calls, атласы, LOD для крупных шейдеров.
- Профайлинг: GPU Profiler, Android Studio Profiler, UE4 Stat commands.

<!-- Добавленная секция: Технологии -->
## Технологии

| Компонент              | Используемый инструмент          |
|------------------------|----------------------------------|
| Движок                 | Unreal Engine 4.27               |
| Платформа              | Android                          |
| Интерфейс              | UMG (Unreal Motion Graphics)     |
| AI                     | NavMesh + AI Blueprints          |
| Графика/Эффекты        | Post-Process Material (освещение)|

Архитектура проекта
- BP/С++: Игровая логика ядра в C++ (производительность), быстрое прототипирование — Blueprints.
- Компоненты:
  - SlimeCharacter (movement, state machine, physics interaction).
  - SlimeAbilityComponent (упгрейды, состояния).
  - Enemy (AI simple patrolling).
  - LevelManager (spawn points, objectives).
  - UIManager (HUD, touch controls).
- Сериализация прогресса: SaveGame для прогресса и настроек.

Оптимизации под Mobile
- Использовать atlases, уменьшать размер текстур.
- Отключать дорогие постпроцесс-эффекты.
- Пул объектов для частых спаунов (эффекты, враги).
- Ограничить количество активной физики одновременно.
- Batch-рендеринг, упрощённые коллайдеры.

Контент и уровни
- Режимы: Кампания (серии коротких уровней), Time Trial (соревновательные уровни), Endless (генерация).
- Дизайн уровней: обучение → комбинирование механик → челленджи.
- Примеры механических задач: платформы, требующие растягивания; проходы, требующие уменьшения; секции с высокой вязкостью.

MVP (минимальные обязательные функции)
- Управление слаймом и базовая физика.
- 5 игровых уровней с увеличивающейся сложностью.
- 2 типа врагов и 1 бонус.
- Сохранение прогресса.
- Базовый HUD и сенсорное управление.

План разработки (примерный)
- Неделя 1–2: Прототип движения и физики слизи (локальный тест на Android).
- Неделя 3: Управление, UI, базовый уровень.
- Неделя 4–5: Враги, препятствия, 3 уровня.
- Неделя 6: Оптимизация и сборка на устройствах.
- Неделя 7: Полировка, звук, сборка MVP.

<!-- Добавленная секция: Roadmap -->
## Roadmap

| Этап                          | Статус        | % выполнения |
|--------------------------------|---------------|--------------|
| Core-геймплей (движение, свет) | В процессе    | 10%          |
| AI и враги                     | Запланировано | 0%           |
| Генерация лабиринта            | Запланировано | 0%           |
| UI и HUD                       | Запланировано | 0%           |
| Оптимизация (Android)          | Запланировано | 0%           |
| Публикация в Google Play       | Запланировано | 0%           |

Примечание: текущий "План разработки (примерный)" согласован с Roadmap — первичный фокус на Core-геймплее (10% завершено), далее по приоритету: вводное управление/UI, враги и оптимизация для Android.

Риски и mitigations
- Производительность на низких устройствах — mitigation: профайлинг, отключение эффектов, упрощение физики.
- Сложность управления на сенсоре — mitigation: настраиваемая чувствительность и вариант управления.
- Баланс вязкости/упругости — mitigation: настроечные параметры и playtesting.

Список ассетов (базовый)
- Слайм: набор спрайтов/анимаций (idle, run, jump, stretch, squish).
- Враги: 2-3 набора спрайтов.
- Тайлы для уровней: 10–20 тайлов.
- Эффекты: брызги, частицы.
- UI: кнопки, иконки, фоны.

Метрики успеха
- Производительность: 30 FPS на целевых устройствах.
- Удержание: время сессии > 3 мин (для ранних тестов).
- Отзывы тестировщиков об управлении и ощущении "слизистости".

Приложения / Настройки UE4
- Project Settings -> Input: задать виртуальные оси/аксели для мобильного.
- Android Packaging: включить ETC2/ASTC, уменьшить разрешение при необходимости.
- Рекомендации: Mobile HDR off, Mobile Post Processing off.

Контакты и ресурсы
- Список внутренних задач (backlog), багтрекер, ветвление репозитория для фич.
- Ресурсы по оптимизации UE4 на Android (официальная документация Unreal).

Конец документа.
